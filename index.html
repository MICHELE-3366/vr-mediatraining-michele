<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>VR Media Training - Salle avec public</title>
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <!--
      Mode d'emploi :
      - Tu es placée derrière le pupitre, face au journaliste et au petit public.
      - La question apparaît au-dessus de la tête du journaliste.
      - Bouton sur le pupitre : "Question suivante".
      - Panneau à droite : NOTES / STORYBOARD (que tu peux masquer / afficher).
    -->

    <a-scene>
      <!-- Caméra : toi, derrière le pupitre -->
      <a-entity id="player" position="0 1.9 3">
        <a-camera wasd-controls-enabled="false">
          <a-cursor
            fuse="true"
            fuse-timeout="500"
            raycaster="objects: .clickable">
          </a-cursor>
        </a-camera>
      </a-entity>

      <!-- Sol et plafond -->
      <a-plane rotation="-90 0 0" width="12" height="12" position="0 0 0" color="#777777"></a-plane>
      <a-plane rotation="90 0 0" width="12" height="12" position="0 4 0" color="#999999"></a-plane>

      <!-- Murs -->
      <a-box position="0 2 -6" depth="0.2" height="4" width="12" color="#222222"></a-box> <!-- mur du fond -->
      <a-box position="-6 2 0" depth="12" height="4" width="0.2" color="#333333"></a-box> <!-- mur gauche -->
      <a-box position="6 2 0" depth="12" height="4" width="0.2" color="#333333"></a-box> <!-- mur droit -->
      <a-box position="0 2 6" depth="0.2" height="4" width="12" color="#222222"></a-box> <!-- mur derrière toi -->

      <!-- Pupitre (devant toi) -->
      <a-box position="0 1 2" depth="0.5" height="1" width="1.2" color="#444444"></a-box>

      <!-- Journaliste en face (avatar simple) -->
      <!-- Corps -->
      <a-cylinder position="0 1 -1" radius="0.3" height="1.2" color="#5555AA"></a-cylinder>
      <!-- Tête -->
      <a-sphere position="0 1.9 -1" radius="0.3" color="#FFCCAA"></a-sphere>

      <!-- Public : deux personnes assises à gauche et à droite -->
      <!-- Personne 1 -->
      <a-cylinder position="-2 0.9 -2" radius="0.25" height="0.9" color="#AA5555"></a-cylinder>
      <a-sphere position="-2 1.5 -2" radius="0.25" color="#FFDDCC"></a-sphere>
      <!-- Personne 2 -->
      <a-cylinder position="2 0.9 -2" radius="0.25" height="0.9" color="#55AA55"></a-cylinder>
      <a-sphere position="2 1.5 -2" radius="0.25" color="#FFDDCC"></a-sphere>

      <!-- Rangée de chaises (simplement des boxes) -->
      <a-box position="-2 0.45 -2.4" depth="0.8" height="0.1" width="0.6" color="#555555"></a-box>
      <a-box position="2 0.45 -2.4" depth="0.8" height="0.1" width="0.6" color="#555555"></a-box>

      <!-- "Écran" ou panneau derrière le journaliste -->
      <a-box position="0 2 -5.8" depth="0.1" height="3" width="6" color="#111111"></a-box>

      <!-- Question au-dessus de la tête du journaliste -->
      <a-entity id="questionText"
                position="0 2.6 -1"
                text="value: Bienvenue dans la salle d'entraînement média.;
                      align: center;
                      wrapCount: 40;
                      width: 6;
                      color: #FFFFFF;">
      </a-entity>

      <!-- Bouton "Question suivante" sur le pupitre -->
      <a-box id="nextButton"
             position="0 1.2 1.7"
             depth="0.2" height="0.3" width="1"
             color="#0066CC"
             class="clickable">
      </a-box>
      <a-entity position="0 1.2 1.71"
                text="value: Question suivante;
                      align: center;
                      width: 3;
                      color: #FFFFFF;">
      </a-entity>

      <!-- Panneau storyboard / notes à droite de la salle -->
      <a-box id="notesPanel"
             position="4.5 2 -2"
             depth="0.1" height="3" width="3.5"
             color="#333333"></a-box>

      <a-entity id="notesTitle"
                position="4.5 3.3 -1.95"
                text="value: NOTES / STORYBOARD;
                      align: center;
                      width: 4;
                      color: #FFD700;">
      </a-entity>

      <a-entity id="notesText"
                position="4.5 1.9 -1.95"
                text="value: ;
                      align: left;
                      wrapCount: 26;
                      width: 3.4;
                      color: #FFFFFF;">
      </a-entity>

      <!-- Bouton pour afficher / cacher les notes (en bas du panneau) -->
      <a-box id="toggleNotesButton"
             position="4.5 0.9 -1.7"
             depth="0.2" height="0.3" width="2.5"
             color="#880044"
             class="clickable">
      </a-box>
      <a-entity position="4.5 0.9 -1.69"
                text="value: Afficher / cacher les notes;
                      align: center;
                      width: 4;
                      color: #FFFFFF;">
      </a-entity>

      <!-- Lumières -->
      <a-entity light="type: ambient; intensity: 0.7"></a-entity>
      <a-entity light="type: point; intensity: 1" position="0 3 1"></a-entity>
    </a-scene>

    <script>
      // LISTE DES QUESTIONS
      const questions = [
        "Pouvoir d'achat : que dites-vous à une mère célibataire qui n'arrive plus à boucler ses fins de mois ?",
        "Sécurité : certains vous accusent d'exagérer la situation dans le Gers. Que répondez-vous ?",
        "Santé / déserts médicaux : concrètement, que faites-vous pour qu'un Gersois trouve un médecin à moins de 20 minutes ?",
        "Immigration : vos propositions sont jugées trop dures par vos adversaires. Comment justifiez-vous votre ligne ?",
        "Agriculture : un éleveur vous dit qu'il va arrêter l'année prochaine. Que pouvez-vous lui promettre réellement ?"
      ];

      // NOTES / STORYBOARD associées
      const notes = [
        "- Rappeler mon parcours de terrain, je connais les fins de mois difficiles.\\n- Parler concret : carburant, alimentation, factures.\\n- Proposer : baisse de TVA sur l'énergie, soutien aux familles monoparentales.\\n- Message clé : \\\"Je ne promets pas la lune, je parle de ce qui se voit sur le ticket de caisse.\\\"",
        "- Ne pas nier les chiffres : rappeler les faits dans le Gers.\\n- Expliquer que la sécurité, c'est aussi le ressenti des habitants.\\n- Mettre en avant mon expérience de policière.\\n- Message clé : \\\"Je préfère prévenir que minimiser.\\\"",
        "- Expliquer le scandale des déserts médicaux dans le Gers.\\n- Proposer : incitations fortes à l'installation, maisons de santé, réouverture de services.\\n- Parler de l'égalité d'accès aux soins.\\n- Message clé : \\\"Un Gersois ne vaut pas moins qu'un Parisien.\\\"",
        "- Distinguer immigration légale / illégale.\\n- Parler de maîtrise, de fermeté, mais sans agressivité.\\n- Lier immigration, insécurité, pression sur les services publics.\\n- Message clé : \\\"On ne peut pas accueillir dignement si on n'a déjà pas les moyens pour nos propres concitoyens.\\\"",
        "- Parler de la détresse des agriculteurs du Gers.\\n- Mettre en cause les normes absurdes et les accords de libre-échange.\\n- Proposer : prix rémunérateurs, préférence locale, simplification.\\n- Message clé : \\\"Sans nos agriculteurs, il n'y a plus de Gers.\\\""
      ];

      let currentIndex = 0;
      let notesVisible = true;

      const questionEl = document.querySelector('#questionText');
      const notesTextEl = document.querySelector('#notesText');
      const notesPanelEl = document.querySelector('#notesPanel');
      const notesTitleEl = document.querySelector('#notesTitle');
      const nextButton = document.querySelector('#nextButton');
      const toggleNotesButton = document.querySelector('#toggleNotesButton');

      function showQuestion(index) {
        const q = questions[index];
        questionEl.setAttribute('text', 'value', q);

        const n = notes[index] || "";
        notesTextEl.setAttribute('text', 'value', n);
      }

      function nextQuestion() {
        currentIndex = (currentIndex + 1) % questions.length;
        showQuestion(currentIndex);
      }

      function toggleNotes() {
        notesVisible = !notesVisible;
        const visible = notesVisible;
        notesPanelEl.setAttribute('visible', visible);
        notesTitleEl.setAttribute('visible', visible);
        notesTextEl.setAttribute('visible', visible);
      }

      // Affiche la première question au chargement
      showQuestion(currentIndex);

      // Clics sur les boutons
      nextButton.addEventListener('click', nextQuestion);
      toggleNotesButton.addEventListener('click', toggleNotes);
    </script>
  </body>
</html>
